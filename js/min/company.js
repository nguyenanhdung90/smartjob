jQuery(document).ready(function(e){JobEngine.Views.CompanyListItem=Backbone.View.extend({tagName:"li",template:_.template('<a class="company-item" href="<%= post_url %>"><%= display_name %></a>'),render:function(e){this.$el.html(this.template(this.model.toJSON()));return this}});JobEngine.Views.CompaniesView=Backbone.View.extend({el:e("body"),conpanies:null,events:{"keyup input#companies_filter":"search_company","click ul.list-alphabet li a":"filter_company"},initialize:function(t){var n=_.map(e(".company-item"),function(t){return{display_name:e.trim(e(t).html()),post_url:e(t).attr("href"),element:e(t)}});this.companies=new JobEngine.Collections.Companies(n)},render:function(t){e(".company-section ul").html("");_.each(t,function(t){var n=e.trim(t.get("display_name")).substring(0,1).toUpperCase();var r=new JobEngine.Views.CompanyListItem({model:t});e(".company-section[data-char="+n+"] ul").append(r.render().el)});_.each(e(".company-section"),function(t){var n=e(t);if(e.trim(n.find("ul").html())===""){n.hide()}else{n.show()}});e("#list_company > li:not(:hidden)").wookmark({container:e(".companies-container"),offset:28})},search_company:function(t){t.preventDefault();var n=e(t.target).val();var r=this.companies.filter(function(e){var t=new RegExp(n,"i");return t.test(e.get("display_name"))});this.render(r)},filter_company:function(t){t.preventDefault();var n=e(t.currentTarget),r="^"+n.attr("data").toUpperCase(),i;e(".list-alphabet li").removeClass("active");n.parent().addClass("active");i=this.companies.filter(function(e){var t=new RegExp(r,"i");return t.test(e.get("display_name"))});Backbone.history.navigate("filter/"+n.attr("data"));this.render(i)}});new JobEngine.Views.CompaniesView;JobEngine.Routers.Company=Backbone.Router.extend({routes:{"filter/:value":"filterCompany"},initialize:function(){},filterCompany:function(t){e("ul.list-alphabet li a[data="+t.toUpperCase()+"]").trigger("click")}});new JobEngine.Routers.Company;Backbone.history.start({pushState:false,root:et_globals.routerRootCompanies});e("#list_company > li").wookmark({container:e(".companies-container"),offset:28})})